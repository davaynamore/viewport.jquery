<!DOCTYPE html>
<html>
  <head lang="en">
    <meta charset="UTF-8">
    <title>jQuery.viewport work example</title>

    <link rel="stylesheet" href="stylesheet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/zenburn.min.css">
  </head>
  <body>
    <div class="scrollable-wrapper">
    </div>
    <div class="ghost-wrapper">

    </div>

    <div class="message">Hello, i'm Viewport and i'm painted red.<br /> You can resize me vertically, and i'll still track my little childrens correctly ^_^<br /> Below you can see my JS code.
      <br /><br />
      <pre><code class="javascript">
scrollable.find('.element').viewportTrack({
     "tracker": function (state) {
         let $this = $(this);

         if (state.inside) {
             $this.find('span').text('I am inside the viewport ^_^');
             ghost.find(`.element.${$this.attr('el_num')} span`)
                  .text('I am inside the viewport ^_^');
         }
         else {
             $this.find('span').text('I am outside the viewport T_T');
             ghost.find(`.element.${$this.attr('el_num')} span`)
                  .text('I am outside the viewport T_T');
         }
     },
 });
			</code></pre>
    </div>
  </body>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script src="../jquery.viewport.new.js"></script>
  <script type="text/javascript">
      $(function () {
          hljs.initHighlightingOnLoad();

          let scrollable = $('.scrollable-wrapper'),
              ghost      = $('.ghost-wrapper').css('margin-top', scrollable.offset().top),
              html       = '';

          for (let i = 1; i < 50; i++) {
              html += `<div class="element ${i}" el_num="${i}"><div class="sub-element"><span></span></div></div>`;
          }

          scrollable.append(html);
          ghost.append(html);

          scrollable.on('scroll resize', () => {
              ghost.offset({top: scrollable.offset().top - scrollable.scrollTop()});
          });

          //console.log($('.scrollable-wrapper .element.1').viewportTrack());
          //console.log($('.scrollable-wrapper .element.2').viewportTrack());
          scrollable.find('.element')
                    .viewportTrack({
                                       "tracker": function (state) {
                                           let $this = $(this);

                                           if (state.inside) {
                                               $this.find('span').text('I am inside the viewport ^_^');
                                               ghost.find(`.element.${$this.attr('el_num')} span`)
                                                    .text('I am inside the viewport ^_^');
                                           }
                                           else {
                                               $this.find('span').text('I am outside the viewport T_T');
                                               ghost.find(`.element.${$this.attr('el_num')} span`)
                                                    .text('I am outside the viewport T_T');
                                           }
                                       },
                                   });
      });
  </script>
</html>